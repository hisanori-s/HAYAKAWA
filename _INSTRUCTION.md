# カート在庫確認機能の最適化 - 残課題対応

## 現在の状態
1. 在庫確認ロジックの最適化が完了
   - 初回ロード時の全商品在庫確認
   - 在庫オーバー商品の数量調整時のみの在庫再確認
   - 不要な在庫確認の削除

2. 在庫オーバー商品の制御
   - 在庫オーバー商品は赤背景で表示
   - 決済ボタンは在庫オーバーが解消されるまで無効化
   - エラーメッセージで在庫状況を表示

## 残課題
1. 在庫オーバー商品の数量増加ボタンが有効になっている
   - 現状：在庫オーバー状態でも数量増加ボタンが押せる
   - 要件：在庫オーバー状態の商品は数量増加ボタンを無効化する必要がある

## 修正方針
1. 数量増加ボタンの制御ロジック修正
   ```typescript
   // 在庫オーバー状態の判定を追加
   const isOutOfStock = item.requiresInventory && currentStock < item.quantity;

   // 増加ボタンの無効化条件に在庫オーバー状態を追加
   disabled={item.quantity >= maxOrderQuantity || isOutOfStock}
   ```

## 必要なファイル
1. `app/cart/page.tsx`
   - 数量増加ボタンの制御ロジック修正
   - 在庫オーバー状態の判定ロジック追加

## 完了条件
1. 在庫オーバー状態の商品は数量増加ボタンが無効化されること
2. 在庫数以下まで数量を減らすと増加ボタンが有効化されること
3. 在庫管理対象外の商品は通常通り操作可能なこと

## 次のAIへの指示
1. `app/cart/page.tsx`の数量増加ボタンの制御ロジックを修正してください
2. 在庫オーバー状態の判定を追加し、その状態での増加ボタンを無効化してください
3. 修正後、動作確認のポイントを提示してください
